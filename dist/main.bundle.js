(()=>{"use strict";class t{constructor(t,e,n){this.principal=t,this.years=e,this.rate=n}calculateMonthlyPayment(){let t=0;return this.rate&&(t=this.rate/100/12),{monthlyRate:t,monthlyPayment:this.principal*t/(1-Math.pow(1/(1+t),12*this.years))}}calculateAmortization(){let t=this.calculateMonthlyPayment(),e=this.principal,n=[];for(let a=0;a<this.years;a++){let a=0,l=0;for(let n=0;n<12;n++){const n=e*t.monthlyRate,o=t.monthlyPayment-n;a+=n,l+=o,e-=o}n.push({principalY:l,interestY:a,balance:e})}return{monthlyPayment:t.monthlyPayment,monthlyRate:t.monthlyRate,amortization:n}}}const e=t=>{const e=""==t.value?"":+t.value;return console.log(e),Number.isNaN(e)?(t.classList.add("is-invalid"),t.classList.remove("is-valid"),!1):(t.classList.add("is-valid"),t.classList.remove("is-invalid"),!0)};function n(n){n&&n.preventDefault();let a=document.getElementById("principal"),l=document.getElementById("years"),o=document.getElementById("rate");if(!e(a)||!e(l)||!e(o))return;let i=new t(a.value,l.value,o.value).calculateAmortization();document.getElementById("monthlyPayment").innerHTML=Math.round(i.monthlyPayment);let s="";i.amortization.forEach(((t,e)=>{s+=`<tr><td>${e+1}</td><td>${Math.round(t.principalY)}</td><td>${Math.round(t.interestY)}</td><td>${Math.round(t.balance)}</td></tr>`})),document.getElementById("tableMortgage").innerHTML=s,document.getElementById("display").style.display="block"}document.addEventListener("DOMContentLoaded",(()=>{(class{static getRates(){return fetch("http://localhost:9000/data/rates.json").then((t=>t.json()))}}).getRates().then((t=>{const e=document.getElementById("rate");for(let n of t){const t=document.createElement("option");t.value=n.rate,t.text=n.name,e.appendChild(t)}})),document.getElementById("formcal").addEventListener("keyup",n),document.getElementById("formcal").addEventListener("change",n),document.getElementById("formcal").addEventListener("submit",n)}))})();
//# sourceMappingURL=main.bundle.js.map